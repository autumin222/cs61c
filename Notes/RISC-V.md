## 寄存器

使用寄存器而不是变量

寄存器数量只有32个，但是速度更快，多余的变量会被放到缓存中被称为**溢出到缓存**

RISC-V Registers:  s0-s11, t0-t6, x0

### 特性

* 直接在硬件上有位置

* 一个寄存器有四个字节大，32bits，储存**一个字**

* 寄存器可以储存程序变量，也可以储存临时变量

* 寄存器无类型，由操作决定内容

零寄存器：保存零值，且无法修改

## 函数

步骤：

1. 将参数放在可访问的地方

2. **传递对函数的控制**

3. 函数获取本地资源

4. 执行任务

5. 函数将返回值放在可访问的地方并且自我清理

6. **返回控制**

### 参数

a0 - a7：八个寄存器处理参数

a0，a1：连个参数寄存器也用来放置返回参数

### 传递控制

#### 函数调用

* jal：jump and link

* jalr：jump and link register

#### 函数返回

* jr：jump register

#### ra寄存器

返回地址寄存器，用于保存调用函数的位置

函数调用和返回都对这个寄存器操作

#### sp寄存器

储存stack的低端指针（stack pointer）

* 减少意味着stack多一层

* 通过 lw 、sw读写

### 寄存器使用

调用保存：

* 调用者保存：使用过程前，调用者保存寄存器的值，调用结束后恢复这些值（对于易失寄存器t0-t6, a0-a7, ra这些寄存器可以被**被调用者随意更改**，有必要的话调用者可以**负责保持前后状态一致**）

* 被调用者保存：被调用者负责保存和恢复（对于**保存寄存器s0-s11**，以及sp寄存器，这些寄存器具有保持性，应该保证**调用前后值相同**）

### 函数操作的一般步骤

1. 设定stack的大小，即设定sp

2. 保存ra（framesize-4）以及需要使用的保存寄存器到stack中

3. 调用其他函数或是简单完成计算任务

4. 恢复保存寄存器以及ra

5. 恢复sp

6. 返回ra

## 指令格式
